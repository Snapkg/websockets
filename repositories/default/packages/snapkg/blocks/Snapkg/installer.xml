<blocks app="Snap! 9.0, https://snap.berkeley.edu" version="2">
  <palette>
    <category name="Snapkg" color="0,116,143,1"/>
  </palette>
  <block-definition s="ðŸ“¦Install Snapkg from %&apos;URL&apos;" type="command" category="Snapkg">
    <variables>
      <list struct="atomic" id="3">debug,start_time,pkg,pkg_name,pkg_version,pkg_author,pkg_sources,source</list>
    </variables>
    <header></header>
    <code></code>
    <translations></translations>
    <inputs>
      <input type="%s">https://raw.githubusercontent.com/elfin8er/Snapkg/development/repositories/default/packages/snapkg/index.json</input>
    </inputs>
    <script>
      <block s="doSetVar">
        <l>debug</l>
        <block s="reportBoolean">
          <l>
            <bool>true</bool>
          </l>
        </block>
      </block>
      <block s="doIf">
        <block var="debug"/>
        <script>
          <block s="doIf">
            <block s="reportNot">
              <block s="reportListContainsItem">
                <block s="reportApplyExtension">
                  <l>var_names(scope)</l>
                  <list>
                    <l>global</l>
                  </list>
                </block>
                <l>ðŸ“¦log</l>
              </block>
            </block>
            <script>
              <block s="doApplyExtension">
                <l>var_declare(scope, name)</l>
                <list>
                  <l>global</l>
                  <l>ðŸ“¦log</l>
                </list>
              </block>
              <block s="doApplyExtension">
                <l>var_set(name, val)</l>
                <list>
                  <l>ðŸ“¦log</l>
                  <block s="reportNewList">
                    <list></list>
                  </block>
                </list>
              </block>
            </script>
            <list></list>
          </block>
          <block s="doIf">
            <block s="reportNot">
              <block s="reportApplyExtension">
                <l>var_showing(name)?</l>
                <list>
                  <l>ðŸ“¦log</l>
                </list>
              </block>
            </block>
            <script>
              <block s="doApplyExtension">
                <l>var_show(name)</l>
                <list>
                  <l>ðŸ“¦log</l>
                </list>
              </block>
            </script>
            <list></list>
          </block>
        </script>
        <list></list>
      </block>
      <block s="doIf">
        <block s="reportNot">
          <block s="reportListContainsItem">
            <block s="reportApplyExtension">
              <l>var_names(scope)</l>
              <list>
                <l>global</l>
              </list>
            </block>
            <l>ðŸ“¦</l>
          </block>
        </block>
        <script>
          <block s="doApplyExtension">
            <l>var_declare(scope, name)</l>
            <list>
              <l>global</l>
              <l>ðŸ“¦</l>
            </list>
          </block>
          <block s="doApplyExtension">
            <l>var_set(name, val)</l>
            <list>
              <l>ðŸ“¦</l>
              <block s="reportTextSplit">
                <l>{"installed": [], "repositories": [], "packages": []}</l>
                <l>
                  <option>json</option>
                </l>
              </block>
            </list>
          </block>
        </script>
        <list></list>
      </block>
      <block s="doSetVar">
        <l>start_time</l>
        <block s="reportDate">
          <l>
            <option>time in milliseconds</option>
          </l>
        </block>
      </block>
      <block s="doAddToList">
        <block s="reportJoinWords">
          <list>
            <l>Downloading </l>
            <block var="URL"/>
          </list>
        </block>
        <block s="reportApplyExtension">
          <l>var_get(name)</l>
          <list>
            <l>ðŸ“¦log</l>
          </list>
        </block>
      </block>
      <block s="doSetVar">
        <l>pkg</l>
        <block s="reportTextSplit">
          <block s="reportURL">
            <block var="URL"/>
          </block>
          <l>
            <option>json</option>
          </l>
        </block>
      </block>
      <block s="doAddToList">
        <block var="pkg"/>
        <block s="reportApplyExtension">
          <l>var_get(name)</l>
          <list>
            <l>ðŸ“¦log</l>
          </list>
        </block>
      </block>
      <block s="doSetVar">
        <l>pkg_name</l>
        <block s="reportListItem">
          <l>2</l>
          <block s="reportListItem">
            <l>1</l>
            <block var="pkg"/>
          </block>
        </block>
      </block>
      <block s="doSetVar">
        <l>pkg_version</l>
        <block s="reportListItem">
          <l>2</l>
          <block s="reportListItem">
            <l>2</l>
            <block var="pkg"/>
          </block>
        </block>
      </block>
      <block s="doSetVar">
        <l>pkg_author</l>
        <block s="reportListItem">
          <l>2</l>
          <block s="reportListItem">
            <l>3</l>
            <block var="pkg"/>
          </block>
        </block>
      </block>
      <block s="doAddToList">
        <block s="reportJoinWords">
          <list>
            <l>Update available! Installing </l>
            <block var="pkg_name"/>
            <l> vers </l>
            <block var="pkg_version"/>
            <l> by </l>
            <block s="reportListItem">
              <l>2</l>
              <block s="reportListItem">
                <l>1</l>
                <block var="pkg_author"/>
              </block>
            </block>
          </list>
        </block>
        <block s="reportApplyExtension">
          <l>var_get(name)</l>
          <list>
            <l>ðŸ“¦log</l>
          </list>
        </block>
      </block>
      <block s="doSetVar">
        <l>pkg_sources</l>
        <block s="reportListItem">
          <l>2</l>
          <block s="reportListItem">
            <l>4</l>
            <block var="pkg"/>
          </block>
        </block>
      </block>
      <block s="doForEach">
        <l>item</l>
        <block var="pkg_sources"/>
        <script>
          <block s="doAddToList">
            <block var="item"/>
            <block s="reportApplyExtension">
              <l>var_get(name)</l>
              <list>
                <l>ðŸ“¦log</l>
              </list>
            </block>
          </block>
          <block s="doSetVar">
            <l>source</l>
            <block s="reportURL">
              <block s="reportListItem">
                <l>2</l>
                <block s="reportListItem">
                  <l>1</l>
                  <block var="item"/>
                </block>
              </block>
            </block>
          </block>
          <block s="doAddToList">
            <l>Importing source</l>
            <block s="reportApplyExtension">
              <l>var_get(name)</l>
              <list>
                <l>ðŸ“¦log</l>
              </list>
            </block>
          </block>
          <block s="doAddToList">
            <block var="source"/>
            <block s="reportApplyExtension">
              <l>var_get(name)</l>
              <list>
                <l>ðŸ“¦log</l>
              </list>
            </block>
          </block>
          <block s="doRun">
            <block s="reportJSFunction">
              <list>
                <l>xmlString</l>
              </list>
              <l>this.parentThatIsA(IDE_Morph).rawOpenBlocksString(xmlString, "block", true)</l>
            </block>
            <list>
              <block var="source"/>
            </list>
          </block>
        </script>
      </block>
      <block s="doDeclareVariables">
        <list>
          <l>i</l>
          <l>found</l>
        </list>
      </block>
      <block s="doSetVar">
        <l>i</l>
        <l>1</l>
      </block>
      <block s="doForEach">
        <l>item</l>
        <block s="reportListItem">
          <l>2</l>
          <block s="reportListItem">
            <l>1</l>
            <block s="reportApplyExtension">
              <l>var_get(name)</l>
              <list>
                <l>ðŸ“¦</l>
              </list>
            </block>
          </block>
        </block>
        <script>
          <block s="doIf">
            <block s="reportVariadicEquals">
              <list>
                <block s="reportListItem">
                  <l>2</l>
                  <block s="reportListItem">
                    <l>1</l>
                    <block var="item"/>
                  </block>
                </block>
                <block var="pkg_name"/>
              </list>
            </block>
            <script>
              <block s="doReplaceInList">
                <block var="i"/>
                <block s="reportListItem">
                  <l>2</l>
                  <block s="reportListItem">
                    <l>1</l>
                    <block s="reportApplyExtension">
                      <l>var_get(name)</l>
                      <list>
                        <l>ðŸ“¦</l>
                      </list>
                    </block>
                  </block>
                </block>
                <block var="pkg"/>
              </block>
              <block s="doSetVar">
                <l>found</l>
                <block s="reportBoolean">
                  <l>
                    <bool>true</bool>
                  </l>
                </block>
              </block>
              <block s="doStopThis">
                <l>
                  <option>this block</option>
                </l>
              </block>
            </script>
            <list></list>
          </block>
          <block s="doChangeVar">
            <l>i</l>
            <l>1</l>
          </block>
        </script>
      </block>
      <block s="doIf">
        <block s="reportNot">
          <block var="found"/>
        </block>
        <script>
          <block s="doAddToList">
            <block var="pkg"/>
            <block s="reportListItem">
              <l>2</l>
              <block s="reportListItem">
                <l>1</l>
                <block s="reportApplyExtension">
                  <l>var_get(name)</l>
                  <list>
                    <l>ðŸ“¦</l>
                  </list>
                </block>
              </block>
            </block>
          </block>
        </script>
        <list></list>
      </block>
      <block s="doAddToList">
        <block s="reportJoinWords">
          <list>
            <l>Done in </l>
            <block s="reportJoinWords">
              <list>
                <block s="reportDifference">
                  <block s="reportDate">
                    <l>
                      <option>time in milliseconds</option>
                    </l>
                  </block>
                  <block var="start_time"/>
                </block>
                <l> ms</l>
              </list>
            </block>
          </list>
        </block>
        <block s="reportApplyExtension">
          <l>var_get(name)</l>
          <list>
            <l>ðŸ“¦log</l>
          </list>
        </block>
      </block>
    </script>
    <scripts>
      <script x="14" y="1768.1833333333332">
        <block s="errorObsolete"></block>
      </script>
      <script x="519" y="546.0999999999999">
        <block s="doForEach">
          <l>item</l>
          <block s="reportListItem">
            <l>2</l>
            <block s="reportListItem">
              <l>1</l>
              <block s="reportApplyExtension">
                <l>var_get(name)</l>
                <list>
                  <l>ðŸ“¦</l>
                </list>
              </block>
            </block>
          </block>
          <script>
            <block s="doIf">
              <block s="reportVariadicEquals">
                <list>
                  <block s="reportListItem">
                    <l>2</l>
                    <block s="reportListItem">
                      <l>1</l>
                      <block var="item"/>
                    </block>
                  </block>
                  <block var="pkg_name"/>
                </list>
              </block>
              <script>
                <block s="doIf">
                  <block s="reportVariadicGreaterThan">
                    <list>
                      <block var="pkg_version"/>
                      <block s="reportListItem">
                        <l>2</l>
                        <block s="reportListItem">
                          <l>2</l>
                          <block var="item"/>
                        </block>
                      </block>
                    </list>
                  </block>
                  <script></script>
                  <list>
                    <l>
                      <bool>true</bool>
                    </l>
                    <script>
                      <block s="doAddToList">
                        <block s="reportJoinWords">
                          <list>
                            <l>Package &apos;</l>
                            <block s="reportListItem">
                              <l>2</l>
                              <block s="reportListItem">
                                <l>1</l>
                                <block var="item"/>
                              </block>
                            </block>
                            <l>&apos; is already the latest version! Doing nothing.</l>
                          </list>
                        </block>
                        <block s="reportApplyExtension">
                          <l>var_get(name)</l>
                          <list>
                            <l>ðŸ“¦log</l>
                          </list>
                        </block>
                      </block>
                    </script>
                  </list>
                </block>
                <block s="doAddToList">
                  <block s="reportJoinWords">
                    <list>
                      <l>Done in </l>
                      <block s="reportJoinWords">
                        <list>
                          <block s="reportDifference">
                            <block s="reportDate">
                              <l>
                                <option>time in milliseconds</option>
                              </l>
                            </block>
                            <block var="start_time"/>
                          </block>
                          <l> ms</l>
                        </list>
                      </block>
                    </list>
                  </block>
                  <block s="reportApplyExtension">
                    <l>var_get(name)</l>
                    <list>
                      <l>ðŸ“¦log</l>
                    </list>
                  </block>
                </block>
                <block s="doStopThis">
                  <l>
                    <option>this script</option>
                  </l>
                </block>
              </script>
              <list></list>
            </block>
          </script>
        </block>
      </script>
    </scripts>
  </block-definition>
</blocks>